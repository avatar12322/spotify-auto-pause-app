<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="app.title">Spotify Auto-Pause - Configuration</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="setup-container">
        <!-- Header -->
        <div class="setup-header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="11" fill="#1DB954"/>
                    <path d="M8 10l4 4 4-4" stroke="white" stroke-width="2" fill="none"/>
                </svg>
                <h1 data-i18n="app.title">Spotify Auto-Pause</h1>
            </div>
            <p class="setup-subtitle" data-i18n="setup.title">Initial setup - connect to Spotify</p>
        </div>

        <!-- Language Selector -->
        <div class="setup-language">
            <div id="language-container"></div>
        </div>

        <!-- Setup Steps -->
        <div class="setup-content">
            <!-- Step 1 -->
            <div class="setup-step" id="step1">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h3 data-i18n="setup.step1.title">Create Spotify application</h3>
                    <p data-i18n="setup.step1.description">You need a Spotify Developer account so the app can control playback.</p>
                    <div class="step-actions">
                        <button class="btn-primary" id="openSpotifyDashboard">
                            üîó <span data-i18n="buttons.openSpotifyDashboard">Open Spotify Developer Dashboard</span>
                        </button>
                    </div>
                    <div class="instructions">
                        <h4 data-i18n="setup.step1.instructions">Instructions:</h4>
                        <ol id="step1Instructions">
                            <!-- Dynamically populated based on language -->
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="setup-step" id="step2">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h3 data-i18n="setup.step2.title">Enter application details</h3>
                    <p data-i18n="setup.step2.description">Copy the Client ID and Client Secret from your created Spotify app.</p>
                    
                    <div class="form-group">
                        <label for="clientId" data-i18n="setup.step2.clientId">Client ID:</label>
                        <input type="text" id="clientId" data-i18n-placeholder="setup.step2.clientIdPlaceholder" placeholder="Paste Client ID...">
                    </div>
                    
                    <div class="form-group">
                        <label for="clientSecret" data-i18n="setup.step2.clientSecret">Client Secret:</label>
                        <input type="password" id="clientSecret" data-i18n-placeholder="setup.step2.clientSecretPlaceholder" placeholder="Paste Client Secret...">
                        <button type="button" class="toggle-password" id="toggleSecret">üëÅÔ∏è</button>
                    </div>
                    
                    <div class="form-group">
                        <label for="redirectUri" data-i18n="setup.step2.redirectUri">Redirect URI:</label>
                        <input type="text" id="redirectUri" value="http://127.0.0.1:5098/api/auth/spotify/callback" readonly>
                        <small data-i18n="setup.step2.uriNote">This value is correct - don't change it</small>
                    </div>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="setup-step" id="step3">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h3 data-i18n="setup.step3.title">Spotify authorization</h3>
                    <p data-i18n="setup.step3.description">Connect the app to your Spotify account to enable playback control.</p>
                    <div class="step-actions">
                        <button class="btn-primary" id="authorizeSpotify" disabled>
                            üéµ <span data-i18n="buttons.authorize">Authorize with Spotify</span>
                        </button>
                    </div>
                    <div class="auth-status" id="authStatus">
                        <span class="status-icon">‚è≥</span>
                        <span class="status-text" data-i18n="setup.step3.enterData">Enter app details above</span>
                    </div>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="setup-step" id="step4" style="display: none;">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h3 data-i18n="setup.step4.title">Configuration complete!</h3>
                    <p data-i18n="setup.step4.description">All set. The app can now automatically pause Spotify.</p>
                    <div class="success-info" id="successInfo">
                        <!-- Dynamically populated based on language -->
                    </div>
                    <div class="step-actions">
                        <button class="btn-primary" id="finishSetup">
                            üöÄ <span data-i18n="buttons.launchApp">Launch application</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="setup-footer">
            <div class="help-links">
                <a href="#" id="helpLink">‚ùì <span data-i18n="help.needHelp">Need help?</span></a>
                <a href="#" id="premiumInfo">‚ÑπÔ∏è <span data-i18n="help.premiumInfo">Premium requirements</span></a>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div class="modal" id="loadingModal" style="display: none;">
        <div class="modal-content">
            <div class="loading-spinner"></div>
            <h3 data-i18n="modals.loading.title">Connecting to Spotify...</h3>
            <p data-i18n="modals.loading.description">Please wait, authorizing with your Spotify account.</p>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal" id="errorModal" style="display: none;">
        <div class="modal-content error">
            <h3>‚ùå <span data-i18n="modals.error.title">An error occurred</span></h3>
            <p id="errorMessage" data-i18n="modals.error.connectionFailed">Failed to connect to Spotify.</p>
            <div class="modal-actions">
                <button class="btn-secondary" id="closeError" data-i18n="buttons.close">Close</button>
                <button class="btn-primary" id="retryAuth" data-i18n="buttons.retry">Retry</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>